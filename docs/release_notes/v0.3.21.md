# Jiva v0.3.21 - Cloud Deployment Hotfix

**Release Date:** February 19, 2026  
**Type:** Hotfix Release

## Overview

Fixes three bugs that prevented the MCP filesystem server from functioning in Cloud Run deployments. Agents were returning `toolsUsed: []` on all requests despite MCP environment variables being correctly configured.

## Bug Fixes

| # | File | Issue | Fix |
|---|------|-------|-----|
| 1 | `src/interfaces/http/session-manager.ts` | `ENABLE_MCP_SERVERS`, `MCP_FILESYSTEM_ENABLED`, and `MCP_FILESYSTEM_ALLOWED_PATHS` were set in `cloud-run.yaml` but never read â€” filesystem path was hardcoded to `/Users`, which does not exist in the Linux container | Session manager now reads all three env vars; allowed paths are parsed from `MCP_FILESYSTEM_ALLOWED_PATHS` |
| 2 | `Dockerfile` | `npx -y` re-downloaded `@modelcontextprotocol/server-filesystem` on every session creation, adding latency and failing under network restrictions | Package is now pre-installed globally in the production image; `npx --no` is used to enforce local use |
| 3 | `Dockerfile` | `/workspace` (referenced in `MCP_FILESYSTEM_ALLOWED_PATHS`) did not exist in the container, causing the MCP server process to crash silently on startup | `mkdir -p /workspace` with correct ownership added to the production image stage |

**Note:** `npm ci` calls now include `--ignore-scripts` to prevent the `playwright install` postinstall hook from failing Cloud Build with exit code 127.

## Affected Components

Cloud Run / HTTP mode only. CLI and library usage are unaffected.
